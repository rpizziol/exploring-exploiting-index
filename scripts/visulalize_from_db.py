import os

import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns
import sqlite3


def plot_scatter(title, xlabel, ylabel, figsize=(10, 10)):
    # load from the DB
    db_path = os.path.join(os.path.dirname(__file__), '..', 'data', 'db', 'e2index.db')
    conn = sqlite3.connect(db_path)
    df = pd.read_sql('SELECT * FROM E2Index', conn)

    # Converti il dizionario in un DataFrame e resetta l'indice
    # df = pd.DataFrame.from_dict(dict_distanze, orient='index', columns=['distanza', 'h_index']).reset_index()

    # Rinomina la colonna dell'indice
    # df = df.rename(columns={'index': 'nome'})

    # Rimuovi la parte della stringa dopo il punto
    # df['nome'] = df['nome'].str.split('.').str[0]

    # Crea lo scatterplot con un colore per ogni punto e una legenda
    sns.scatterplot(data=df, x='e2_index', y='h_index', hue='Track', palette='viridis')

    # Imposta il titolo e le etichette degli assi
    plt.title(title)
    plt.xlabel(xlabel)
    plt.ylabel(ylabel)

    # Mostra il grafico
    plt.show()


if __name__ == "__main__":
    plot_scatter('Distanza media tra i documenti', 'Distanza media', 'h-index')
