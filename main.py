# %%
from utils.functions_needed import *
import os 

# %%import os
 # or 'iuss pavia'

# Get a list of all csv files in the current directory
def main(which_dir = 'imt'):


    csv_files = [f for f in os.listdir(which_dir) if f.endswith('.csv')]

    distanze = []
    h_indexes = []
    for file in csv_files:
        # Open the csv file
        database = open_csv('/'.join([which_dir, file]))

        # Clean the data
        clean_data = clean_csv(['Abstract', 'Cited by'], database)

        # Calculate the vectors
        docs = calculate_vectors(clean_data['Abstract'])

        # Calculate the cosine distance
        distanze.append(calculate_cosine_distance(docs))
        h_indexes.append(h_index(clean_data['Cited by']))

        dict_distanze = dict(zip(csv_files, zip(distanze, h_indexes)))

    return dict_distanze

# %%
if __name__ == "__main__":
    main()
# %%
# %%
